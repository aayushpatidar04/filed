
<div class="row">
    <div class="col-3 scrollable-y">
        <h4 class="d-flex">
            <svg xmlns="http://www.w3.org/2000/svg" style="height: 25px; padding-top: 5px;" viewBox="0 0 448 512">
                <path
                    d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z" />
            </svg>
            &nbsp;&nbsp;Issue
        </h4>
        {% if issues %}
        {% for issue in issues %}
        <div class="card mb-1 drag" data-type="type1" draggable="true" id="{{ issue.name }}">
            <div class="card-body">

                <h6 class="text-success mb-0">{{ issue.subject }}&nbsp;&nbsp;&nbsp;<span><a href="javascript:void(0)"
                            data-toggle="modal" data-target="#issueModal{{ issue.name }}"><svg
                                xmlns="http://www.w3.org/2000/svg" fill="orange" style="height: 15px;"
                                viewBox="0 0 576 512">
                                <path
                                    d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z" />
                            </svg></a></span></h6>
                <small class="mt-0">{{ issue.name }}</small><br>
                <strong class="text-danger">Issue Type:</strong> <span class="text-danger">{{ issue.issue_type
                    }}</span><br>
                <span><strong>Assigned to:</strong> {{ issue._assign }}
                    <!-- <a href="javascript:void(0)"
                        class="text-muted btn btn-default icon-btn add-assignment-btn" data-toggle="modal"
                        data-target="#formModal{{ issue.name }}"> <svg class="icon icon-sm">
                            <use href="#icon-add"></use>
                        </svg> </a> -->
                </span>
            </div>
        </div>
        <div class="modal issue-modal fade" id="issueModal{{ issue.name }}" tabindex="-1" role="dialog"
            aria-labelledby="issueModalLabel{{ issue.name }}" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="issueModalLabel{{ issue.name }}">{{ issue.subject }}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-6">
                                <p><strong>Issue Name:</strong> {{ issue.name }}</p>
                                <p><strong>Assigned to:</strong> {{ issue._assign }}</p>
                                <p><strong>Issue Type:</strong> {{ issue.issue_type }}</p>
                                <p><strong>Status:</strong> {{ issue.status }}</p>
                                <p><strong>Creation Date:</strong> {{ issue.creation }}</p>
                            </div>
                            <div class="col-6">
                                <div id="map-{{ issue.name }}" style="width: 400px; height: 400px;"></div>
                            </div>
                        </div>
                        <div class="col-12">
                            <p><strong>Description:</strong> {{ issue.description }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="formModal{{ issue.name }}" tabindex="-1" role="dialog"
            aria-labelledby="formModalLabel{{ issue.name }}" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="formModalLabel{{ issue.name }}">{{ issue.subject }}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="custom-form-{{ issue.name }}" class="custom-form" method="POST">
                            <label for="code">Issue Code:</label>
                            <input class="form-control code" type="text" name="code" value="{{ issue.name }}" required
                                readonly><br><br>

                            <label for="technician">Select Co-Technicians (<span class="text-danger">only if more than one technician required</span>):</label><br>
                            <select class="form-control technician" name="technician[]" style="width:100%;" multiple="multiple" required>
                                {% for tech in technicians %}
                                <option value="{{ tech.email }}" {% if issue.assigned %} {% if tech.email in
                                    issue.assigned %} selected {% endif %} {% endif %}>{{ tech.email }}</option>
                                {% endfor %}
                            </select><br><br>

                            <label for="date">Date:</label>
                            <input class="form-control date" type="date" name="date" required><br><br>

                            <label for="stime">Start Time</label>
                            <input class="form-control stime" type="time" name="stime" required readonly><br><br>
                            
                            <label for="etime">End Time:</label>
                            <input class="form-control etime" type="time" name="etime" required>
                            <small><span class="text-danger etime-error"></span></small><br><br>

                            <button type="button" class="submit btn btn-success"
                                data-issue="{{ issue.name }}">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p>No issues found</p>
        {% endif %}

    </div>
    <div class="col-9 scrollable-y">
        <div class="card">
            <div class="card-header d-flex" style="justify-content: space-between;">
                <h5>Service Technician Calendar</h5>
                <select name="day" id="day">
                    <option value="Today">Today</option>
                    <option value="Yesterday">Yesterday</option>
                    <option value="Tomorrow">Tomorrow</option>
                    <option value="Last 7 days">Last 7 days</option>
                    <option value="Next 7 days">Next 7 days</option>
                </select>
            </div>
            <div class="card-body">
                {{ message }}
                <br>
                <br>
                <div class="row scrollable-x">
                    <div class="col-4 mb-1 text-center"
                        style="border-bottom: 1px solid #000; border-right: 1px solid #000;"><b>Users</b></div>
                    <div class="col-8 mb-1 d-flex">
                        <div class="d-flex" style="border-bottom: 1px solid #000;">
                            {% for slot in slots %}
                            <div style="width: 100px; border-right: 1px solid #000;" class="px-1">{{ slot.label }}</div>
                            {% endfor %}
                        </div>
                    </div>
                    {% for item in technicians%}
                    <div class="col-4 mb-1" style="border-bottom: 1px solid #000; border-right: 1px solid #000;">
                        <div class="d-flex">
                            <div><img src="{{ item.user_image }}"
                                    style="width: 50px; height: auto; border-radius: 50px;" alt=""></div>
                            <div>{{ item.full_name }}<br><small>{{ item.email }}</small></div>
                        </div>
                    </div>
                    <div class="col-8 mb-1 d-flex" style="align-items: center;">
                        <div class="d-flex">
                            {{ item.html_content }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
<br><br><br><br><br><br>







<!-- <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script> -->

